spring:
    application:
        name: stockleague-backend

    config:
        import: optional:file:.env[.properties]


    profiles:
        active: ${SPRING_PROFILES_ACTIVE:docker}

    datasource:
        url: ${SPRING_DATASOURCE_URL}
        username: ${SPRING_DATASOURCE_USERNAME}
        password: ${SPRING_DATASOURCE_PASSWORD}
        driver-class-name: org.postgresql.Driver
        hikari:
            connection-timeout: 30000
            maximum-pool-size: 10
            minimum-idle: 2
            idle-timeout: 600000
            max-lifetime: 1800000

    jpa:
        hibernate:
            ddl-auto: validate
        show-sql: true
        properties:
            hibernate:
                format_sql: true
                dialect: org.hibernate.dialect.PostgreSQLDialect

    flyway:
        enabled: false
        locations: classpath:db/migration
        baseline-on-migrate: true
        validate-on-migrate: true
        out-of-order: false
        connect-retries: 5

    kafka:
        bootstrap-servers: ${SPRING_KAFKA_BOOTSTRAP_SERVERS}
        consumer:
            group-id: stockleague-group
            auto-offset-reset: earliest

    data:
        redis:
            host: ${SPRING_REDIS_HOST}
            port: 6379
            password: ${SPRING_REDIS_PASSWORD}


jwt:
    secret: ${JWT_SECRET_KEY}
    access-token-validity: 1800000       # 30분 = 1000 * 60 * 30
    refresh-token-validity: 2592000000   # 30일 = 1000 * 60 * 60 * 24 * 30

server:
    port: 8080
    servlet:
        encoding:
            charset: UTF-8
            enabled: true
            force: true

cors:
    allowed-origins: ${ALLOWED_ORIGINS}

kakao:
    client-id: ${KAKAO_CLIENT_ID}
    client-secret: ${KAKAO_CLIENT_SECRET}
    redirect-uri: ${KAKAO_REDIRECT_URI}
    token-uri: https://kauth.kakao.com/oauth/token
    user-info-uri: https://kapi.kakao.com/v2/user/me
    auth-base-url: https://kauth.kakao.com
    api-base-url: https://kapi.kakao.com

logging:
    level:
        root: info
        org.springframework.web: debug
        com.stockleague.backend: debug

openapi:
    auth-url: https://openapivts.koreainvestment.com:29443
    appKey: ${OPENAPI_API_KEY}
    appSecret: ${OPENAPI_API_SECRET}
    grant-type: client_credentials
    scope: oob
